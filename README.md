üöÄ Dockerized MikroTik RouterOS (CHR) with KVMUn contenedor Docker de alto rendimiento para ejecutar MikroTik RouterOS (CHR). Dise√±ado para ser ligero, seguro y extremadamente f√°cil de configurar mediante variables de entorno y aceleraci√≥n por hardware.‚ú® Caracter√≠sticas Principales‚ö° Aceleraci√≥n KVM Nativa: Detecta autom√°ticamente si /dev/kvm est√° disponible para ofrecer un rendimiento casi nativo.üîå Gesti√≥n Inteligente de Puertos: Mapeo din√°mico y sencillo mediante variables de entorno (soporta TCP/UDP).üíæ Auto-Resize: El disco virtual se expande autom√°ticamente al tama√±o definido en DISK_SIZE.ü§ñ Auto-Configuraci√≥n: Inyecta scripts .rsc (MikroTik Scripting) autom√°ticamente en el primer arranque.üíª Terminal Helper: Acceso directo a la consola interactiva mediante docker exec.üìÇ Persistencia Completa: Almacena la imagen y configuraciones en vol√∫menes externos para evitar p√©rdida de datos.üìã Requisitos PreviosSO: Linux (con soporte KVM habilitado) o WSL2.Virtualizaci√≥n: BIOS con VT-x o AMD-V activado.Software: Docker y Docker Compose instalados.‚ö° Inicio R√°pidoClonar y desplegar:Bashgit clone https://github.com/dayron95/mikrotik-docker.git
cd mikrotik-docker
docker-compose up -d --build
Acceso Inicial:Winbox: Puerto 8291WebFig (HTTP): Puerto 80 (Redirigido internamente al 8080)SSH: Puerto 22 (Redirigido internamente al 2222)Credenciales: Usuario admin | Contrase√±a: (vac√≠o)üõ†Ô∏è Configuraci√≥n (Variables de Entorno)Puedes personalizar el router editando el archivo docker-compose.yml:VariablePor DefectoDescripci√≥nROUTEROS_VERSION7.12.1Versi√≥n oficial de MikroTik a descargar.ROUTEROS_RAM512Memoria RAM asignada (MB).ROUTEROS_CPU2Cantidad de n√∫cleos asignados.DISK_SIZE1GTama√±o del disco (ej: 512M, 2G, 10G).ROUTEROS_USERadminUsuario para el comando terminal autom√°tico.ROUTEROS_PASSWORD(vac√≠o)Contrase√±a para el comando terminal autom√°tico.üîå Puertos y Redirecci√≥nEl contenedor utiliza una redirecci√≥n User-mode (SLIRP). Aqu√≠ los mapeos est√°ndar:ServicioHostContenedorVariableSSH222222-Winbox82918291-HTTP808080-WireGuard1323113231PORT_WIREGUARD‚ûï A√±adir Puertos Personalizados (EXTRA_PORTS)Formato: Host:Guest:Protocolo. Ejemplo en docker-compose.yml:YAMLenvironment:
  - EXTRA_PORTS=1194:1194:udp,500:500:udp,1701:1701:tcp
[!IMPORTANT]No olvides declarar estos mismos puertos en la secci√≥n ports: de tu archivo compose.üéÆ Operaciones ComunesAcceder a la Consola (CLI)Usa el alias integrado para entrar al router al instante:Bashdocker exec -it mikrotik-pro terminal
Script de Auto-ArranqueColoca tu script en ./config/autorun.rsc.El contenedor lo ejecutar√° al primer inicio.Se crear√° un archivo .applied para evitar ejecuciones duplicadas.üö® Soluci√≥n de ProblemasRendimiento lento: Verifica que /dev/kvm existe. Ejecuta ls -l /dev/kvm. Si no tienes permisos, prueba: sudo chmod 666 /dev/kvm.Winbox no conecta: Aseg√∫rate de que el puerto 8291 est√© expuesto y que no haya firewalls bloque√°ndolo en el Host.DHCP: No cambies la configuraci√≥n IP de la interfaz ether1, ya que QEMU depende de ella para el reenv√≠o de puertos.üìÑ LicenciaEste proyecto es una herramienta de automatizaci√≥n. MikroTik RouterOS y CHR son marcas registradas de MikroTikls SIA. La versi√≥n CHR es gratuita pero limitada a 1Mbps de subida a menos que apliques una licencia oficial.Desarrollado por dayron95
